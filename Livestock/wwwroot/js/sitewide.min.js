function updateMultiSelect(n,t,i){for(i===void 0&&(i=null);n.options.length>0;)n.options.remove(0);t.filter(function(n){return i==null||i.indexOf(n.value)==-1}).forEach(function(t){var i=document.createElement("option");i.value=t.value.toString();i.innerHTML=t.description;n.options.add(i)})}function performMultiSelectAjax(n,t,i,r){for(var u=n.id+"-"+t.id+"-"+r+"-"+n.value,e=[],f=0;f<i.options.length;f++)e.push(Number(i.options.item(f).value));u in multiSelectCache?updateMultiSelect(t,multiSelectCache[u]):$.ajax({type:"POST",url:"/CritterEx/GetCrittersFilteredValueDescription",contentType:"application/json",dataType:"json",data:JSON.stringify({Name:n.value})}).done(function(n){multiSelectCache[u]=n;updateMultiSelect(t,n,e)})}function moveBetweenSelectBoxes(n,t){for(var u,r,i=0;i<n.selectedOptions.length;i++){for(u=!1,r=0;r<t.length;r++)if(!(t.options.item(r).text<n.selectedOptions.item(i).text)){t.add(n.selectedOptions.item(i),r);u=!0;break}u||t.add(n.selectedOptions.item(i))}}function clearSelection(n){while(n.selectedOptions.length>0)n.selectedOptions[0].selected=!1}function registerMultiSelect(n,t,i,r,u,f,e){n.addEventListener("change",function(){performMultiSelectAjax(n,t,i,e)});n.dispatchEvent(new Event("change"));n.onkeyup=function(){n.dispatchEvent(new Event("change"))};n.onkeydown=function(n){return n.keyCode!=13};r.addEventListener("click",function(){return moveBetweenSelectBoxes(t,i)});u.addEventListener("click",function(){return moveBetweenSelectBoxes(i,t)});f!==null&&f.addEventListener("submit",function(){for(var n=0;n<i.options.length;n++)i.options.item(n).selected=!0})}var multiSelectCache={},CAN_USE_COOKIES=!1;